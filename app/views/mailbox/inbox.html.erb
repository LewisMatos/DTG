

<% @inbox.each do |matches| %>
   <% @conversations = matches.messages %>
    <% @id = matches.id %>
      <% #binding.pry %>
      <ul class="collapsible" data-collapsible="accordion" style="width:100%;">
          <li>
            <div class="collapsible-header" style="height:100px;"><img src=<%= @conversations.first.sender.image %> style="width:100px;, height:100px;">   <%= @conversations.first.sender.name %>   </div>
            <div class="collapsible-body" style="background-color:white;, height:100px;">
              <% @conversations.each do |convo| %>
                  <% @convo = convo %>

                  <%= render partial: 'conversations/messages', object: @convo, as: 'message' %>
                  <br>
              <% end %>
                <%= form_for :message, url: reply_conversation_path(@id) do |f| %>
                  <div class="form-group">
                    <%= f.text_area :body, placeholder: "Reply Message", rows: 4, class: "form-control" %>
                    <%= f.submit "Reply", class: 'btn btn-danger pull-right' %>
                  </div>
                <% end %>
                <br>
            
            </div>
          </li>
      </ul>
<% end %>


 <!-- @conversation ||= mailbox.conversations.find(params[:id]) -->